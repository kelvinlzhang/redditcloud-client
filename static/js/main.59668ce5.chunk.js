(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,n){},135:function(t,e,n){t.exports=n(347)},140:function(t,e,n){},347:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n.n(i),a=n(8),r=n.n(a),o=(n(140),n(128)),h=n(134),c=n(6),l=n(7),u=n(31),d=n(28),g=n(32),m=n(9),f=n(84),v=n(85),p=function(t){return function(e){var n,i,s=[],a=.82,r=80,o=12,h=50,u=40,d=10,g=65,m=function(){function t(n){Object(c.a)(this,t),this.wordDict=n,this.wordBoxes=[],this.boundaries=[new p(e.width,-e.height,e.width,3*e.height),new p(-e.width,-e.height,e.width,3*e.height),new p(0,-e.height,e.width,e.height),new p(0,e.height,e.width,e.height)];for(var i=s[Math.floor(Math.random()*s.length)],a=0,r=Object.entries(n),o=0;o<r.length;o++){var h=r[o],l=Object(v.a)(h,2),m=(l[0],l[1]);m>a&&(a=m)}var b,y=Object.entries(n);y.sort(function(t,e){return e[1]-t[1]}),b=u>y.length?1:y[u][1],y=y.slice(0,u);var w=0,x=!0,k=!1,O=void 0;try{for(var C,j=y[Symbol.iterator]();!(x=(C=j.next()).done);x=!0){var S=C.value,B=Object(v.a)(S,2),D=B[0],E=B[1],M=0==w;w++,this.wordBoxes.push(new f(D,E,a,b,this.getProceduralColor(i,d,g),M))}}catch(P){k=!0,O=P}finally{try{x||null==j.return||j.return()}finally{if(k)throw O}}}return Object(l.a)(t,[{key:"render",value:function(){for(var t=0;t<this.wordBoxes.length;t++)this.wordBoxes[t].render()}},{key:"handleCollisions",value:function(){for(var t=0;t<this.wordBoxes.length;t++)for(var e=t;e<this.wordBoxes.length;e++)t!=e&&this.wordBoxes[t].handleCollision(this.wordBoxes[e]);for(t=0;t<this.wordBoxes.length;t++)this.wordBoxes[t].move()}},{key:"handleBoundary",value:function(){for(var t=0;t<this.wordBoxes.length;t++)for(var e=0;e<this.boundaries.length;e++)this.wordBoxes[t].handleBoundary(this.boundaries[e])}},{key:"getProceduralColor",value:function(t,n,i){return e.color(this.procColorHelper(e.red(t),n,i),this.procColorHelper(e.green(t),n,i),this.procColorHelper(e.blue(t),n,i))}},{key:"procColorHelper",value:function(t,e,n){var i=t+Math.random()*(2*n-2*e)-n;return i=Math.floor(i<=0?i-e:i+e)}}]),t}(),f=function(){function t(n,i,s,l,u,d){Object(c.a)(this,t),this.text=n,this.isBiggest=d,this.freq=i,this.maxFreq=s,this.minFreq=l,this.fontSize=e.map((i-l)/(s-l),0,1,o,r),e.textSize(this.fontSize);var g=Math.random()*h-h/2,m=Math.random()*h-h/2;this.rect=new p(e.width/2-e.textWidth(n)/2+g,e.height/2+m,e.textWidth(n),this.fontSize*a,d),this.yOffset=this.fontSize*(1-a),this.color=u}return Object(l.a)(t,[{key:"render",value:function(){e.textSize(this.fontSize),e.fill(this.color),e.text(this.text,this.rect.x,this.rect.y-this.yOffset)}},{key:"handleCollision",value:function(t){this.rect.handleCollision(t.rect)}},{key:"move",value:function(){this.rect.move()}},{key:"handleBoundary",value:function(t){this.rect.handleCollision(t)}}]),t}(),p=function(){function t(e,n,i,s,a){Object(c.a)(this,t),this.x=e,this.y=n,this.w=i,this.h=s,this.midX=e+i/2,this.midY=n+s/2,this.vx=0,this.vy=0,this.isBiggest=a}return Object(l.a)(t,[{key:"area",value:function(){return this.w*this.h}},{key:"render",value:function(){e.rect(this.x,this.y,this.w,this.h)}},{key:"handleCollision",value:function(t){if(this.collides(t)){var n=1==this.isBiggest?2e-5:1,i=this.midX-t.midX,s=this.midY-t.midY;i<1&&i>=0?i=1:i>-1&&i<=0&&(i=-1),s<1&&s>=0?s=1:s>-1&&s<=0&&(s=-1);var a=4e5/i,r=4e5/s,o=e.pow(this.area(),.3),h=e.pow(t.area(),.3);this.vx+=y(a/o*n,1),this.vy+=y(r/o*n,1),t.vx-=y(a/h,1),t.vy-=y(r/h,1)}}},{key:"addInwardsForce",value:function(){var t=e.width/2,n=e.height/2,i=t-this.midX,s=n-this.midY;this.vx+=1e-4*i,this.vy+=1e-4*s}},{key:"move",value:function(){this.x+=this.vx,this.y+=this.vy,this.midX=this.x+this.w/2,this.midY=this.y+this.h/2,this.vx=.4*this.vx,this.vy=.4*this.vx}},{key:"collides",value:function(t){return this.x<t.x+t.w&&this.x+this.w>t.x&&this.y<t.y+t.h&&this.y+this.h>t.y}},{key:"contains",value:function(t,e){return t>this.x&&t<this.x+this.w&&e>this.y&&e<this.y+this.h}}]),t}(),b=function(){function t(e){Object(c.a)(this,t),this.wordBoxes=e,this.attachedBox=null,this.xOffset=0,this.yOffset=0,this.clickX=0,this.clickY=0,this.isPressed=!1,this.clickThreshold=2}return Object(l.a)(t,[{key:"mousePressed",value:function(){for(var t=0;t<this.wordBoxes.length;t++)this.wordBoxes[t].rect.contains(e.mouseX,e.mouseY)&&(this.attachedBox=this.wordBoxes[t],this.xOffset=e.mouseX-this.wordBoxes[t].rect.x,this.yOffset=e.mouseY-this.wordBoxes[t].rect.y);this.isPressed=!0,this.clickX=e.mouseX,this.clickY=e.mouseY}},{key:"mouseReleased",value:function(){this.clickX-e.mouseX<this.clickThreshold&&this.clickX-e.mouseX>-this.clickThreshold&&this.clickY-e.mouseY<this.clickThreshold&&this.clickY-e.mouseY>-this.clickThreshold&&this.mouseClicked(),this.attachedBox=null,this.isPressed=!1}},{key:"mouseClicked",value:function(){null!=this.attachedBox&&this.updateSentimentChart()}},{key:"handleAttachedBox",value:function(){null!=this.attachedBox&&(this.attachedBox.rect.x=e.mouseX-this.xOffset,this.attachedBox.rect.y=e.mouseY-this.yOffset)}},{key:"updateSentimentChart",value:function(){var t;t=null==this.attachedBox?"":this.attachedBox.text;var e=document.getElementById("canvasForm");Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(e,t);var n=new Event("input",{bubbles:!0});e.dispatchEvent(n)}}]),t}();function y(t,e){return(t<0?-t:t)>e?(t<0?-1:1)*e:t}e.setup=function(){e.createCanvas(720,400),e.textSize(r),e.textAlign(e.LEFT,e.TOP),e.textLeading(0),s=[e.color(0,51,204),e.color(51,204,51),e.color(255,153,51),e.color(153,51,255),e.color(51,204,204)],n=new m(t.dict),i=new b(n.wordBoxes)},e.draw=function(){e.background(255),n.handleBoundary(),n.handleCollisions(),i.handleAttachedBox(),n.render()},e.mousePressed=function(){i.mousePressed()},e.mouseReleased=function(){i.mouseReleased()}}},b=(n(100),n(131)),y=function(t){function e(t){return Object(c.a)(this,e),Object(u.a)(this,Object(d.a)(e).call(this))}return Object(g.a)(e,t),Object(l.a)(e,[{key:"getRanges",value:function(t){var e,n=t[0],i=t[t.length-1]-n;i%10!==0&&(i+=10-i%10);var s=[];for(s.length=11,s[0]=n,e=1;e<s.length;e++)s[e]=s[e-1]+i/10;return s}},{key:"getFrequencyandSentiment",value:function(t,e,n){var i,s=this.getRanges(t),a=[0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0,0,0,0];function o(t,e,n,i){e>=t[0]&&e<t[1]?(a[0]++,r[0]+=i*n/Math.abs(n)):e>=t[1]&&e<t[2]?(a[1]++,r[1]+=i*n/Math.abs(n)):e>=t[2]&&e<t[3]?(a[2]++,r[2]+=i*n/Math.abs(n)):e>=t[3]&&e<t[4]?(a[3]++,r[3]+=i*n/Math.abs(n)):e>=t[4]&&e<t[5]?(a[4]++,r[4]+=i*n/Math.abs(n)):e>=t[5]&&e<t[6]?(a[5]++,r[5]+=i*n/Math.abs(n)):e>=t[6]&&e<t[7]?(a[6]++,r[6]+=i*n/Math.abs(n)):e>=t[7]&&e<t[8]?(a[7]++,r[7]+=i*n/Math.abs(n)):e>=t[8]&&e<t[9]?(a[8]++,r[8]+=i*n/Math.abs(n)):e>=t[9]&&e<=t[10]&&(a[9]++,r[9]+=i*n/Math.abs(n))}for(i=0;i<t.length;i++)o(s,t[i],e[i],n[i]);for(i=0;i<r.length;i++)r[i]/=a[i];return[a,r]}},{key:"getDate",value:function(t){var e,n=this.getRanges(t);function i(t){var e=new Date(1e3*t),n=e.getFullYear(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],s=e.getDate(),a=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return o<10&&(o="0"+o),s=i+" "+s+", "+n+" "+a+":"+r}var s=[];for(s.length=n.length,e=0;e<n.length;e++)s[e]=i(n[e]);return s.slice(0,10)}},{key:"getColors",value:function(){var t,e,n=this.getFrequencyandSentiment(this.props.ts,this.props.vote,this.props.s)[1],i=[];for(i.length=n.length,t=0;t<n.length;t++)i[t]=(e=n[t])<=-.9?"rgba(45, 6, 6, 1)":e>-.9&&e<=-.8?"rgba(62, 8, 8, 1)":e>-.8&&e<=-.7?"rgba(92, 10, 10, 1)":e>-.7&&e<=-.6?"rgba(112, 15, 15, 1)":e>-.6&&e<=-.5?"rgba(135, 18, 18, 1)":e>-.5&&e<=-.4?"rgba(157, 21, 21, 1)":e>-.4&&e<=-.3?"rgba(180, 24, 24, 1)":e>-.3&&e<=-.2?"rgba(202, 28, 28, 1)":e>-.2&&e<=-.1?"rgba(224, 31, 31, 1)":e>-.1&&e<=0?"rgba(234, 98, 98, 1)":e>0&&e<=.1?"rgba(56, 132, 18, 1)":e>.1&&e<=.2?"rgba(171, 251, 132, 1)":e>.2&&e<=.3?"rgba(105, 247, 34, 1)":e>.3&&e<=.4?"rgba(79, 221, 8, 1)":e>.4&&e<=.5?"rgba(70, 197, 7, 1)":e>.5&&e<=.6?"rgba(62, 172, 6, 1)":e>.6&&e<=.7?"rgba(44, 124, 4, 1)":e>.7&&e<=.8?"rgba(35, 99, 3, 1)":e>.8&&e<=.9?"rgba(26, 75, 2, 1)":e>.9&&e<=1?"rgba(17, 50, 1, 1)":void 0;return i}},{key:"render",value:function(){return s.a.createElement("div",{className:"chart"},s.a.createElement(b.a,{data:{labels:this.getDate(this.props.ts),datasets:[{label:this.props.word,data:this.getFrequencyandSentiment(this.props.ts,this.props.vote,this.props.s)[0],backgroundColor:this.getColors()}]},options:{title:{display:this.props.displayTitle,text:this.props.word,fontSize:25},legend:{display:this.props.displayLegend,position:this.props.legendPosition},scales:{xAxes:[{barPercentage:1,categoryPercentage:1}]}}}))}}]),e}(i.Component);y.defaultProps={displayTitle:!0,displayLegend:!0,legendPosition:"right",word:"none"};var w=y,x=n(86),k=n(81),O=n.n(k),C=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(g.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.sketch,n=Object(x.a)(t,["sketch"]);this.canvas=new O.a(e(n),this.wrapper)}},{key:"componentWillReceiveProps",value:function(t){t.sketch;var e=Object(x.a)(t,["sketch"]);this.props.dict!==t.dict&&(this.canvas.remove(),this.canvas=new O.a(t.sketch(e),this.wrapper)),"function"===typeof this.canvas.onNewProps&&this.canvas.onNewProps(t)}},{key:"componentWillUnmount",value:function(){this.canvas.remove()}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{ref:function(e){return t.wrapper=e}})}}]),e}(i.Component),j=n(18),S=(n(324),n(326)),B=function(t){function e(t){var n;return Object(c.a)(this,e),(n=Object(u.a)(this,Object(d.a)(e).call(this,t))).onChangeSubreddit=function(t){n.setState({subreddit:t.target.value})},n.onChangeStartDate=function(t){n.setState({startDate:t})},n.onChangeEndDate=function(t){n.setState({endDate:t})},n.onChangeSentimentChart=function(t){n.setState({word:t.target.value})},n.onSubmit=function(t){t.preventDefault();var e=JSON.stringify({subreddit:n.state.subreddit,start:parseInt((n.state.startDate.getTime()/1e3).toFixed(0)),end:parseInt((n.state.endDate.getTime()/1e3).toFixed(0))});S.post("http://127.0.0.1:8080",e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},timeout:6e4}).then(function(t){return t.data}).then(function(t){var e=Object.assign.apply(Object,[{}].concat(Object(h.a)(t.map(function(t){var e=t.word,n=t.timestamps,i=t.score,s=t.vote;return Object(o.a)({},e,{timestamps:n,score:i,vote:s})})))),i=t.reduce(function(t,e){return t[e.word]=e.frequency,t},{});n.setState({sentiments:e,frequencies:i})})},n.state={subreddit:"",startDate:new Date,endDate:new Date,dateRange:[new Date,new Date],word:"",frequencies:{RedditCloud:25,CS130:15,"Kelvin Zhang":5,"Karen Zhang":5,"Vishaal Agartha":5,"CJ Ordog":5,"Anav Sanghvi":5,"Albert Pan":5},sentiments:{}},n.onChangeSubreddit=n.onChangeSubreddit.bind(Object(m.a)(Object(m.a)(n))),n.onChangeStartDate=n.onChangeStartDate.bind(Object(m.a)(Object(m.a)(n))),n.onChangeEndDate=n.onChangeEndDate.bind(Object(m.a)(Object(m.a)(n))),n.onChangeSentimentChart=n.onChangeSentimentChart.bind(Object(m.a)(Object(m.a)(n))),n}return Object(g.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(C,{sketch:p,dict:this.state.frequencies}),s.a.createElement(j.b,{onSubmit:this.onSubmit},s.a.createElement(j.e,{size:"sm"},s.a.createElement(j.f,{addonType:"prepend"},s.a.createElement(j.g,null,"r/ ")),s.a.createElement(j.d,{value:this.state.subreddit,onChange:this.onChangeSubreddit,placeholder:"computerscience",id:"subreddit"})),s.a.createElement(j.c,null,s.a.createElement(f.a,{selected:this.state.startDate,onChange:this.onChangeStartDate,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"MM/d/yyyy h:mm aa"}),s.a.createElement(f.a,{selected:this.state.endDate,onChange:this.onChangeEndDate,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"MM/d/yyyy h:mm aa"})),s.a.createElement(j.a,{type:"submit",outline:!0,color:"primary",size:"sm"},"Cloudify")),s.a.createElement("input",{style:{display:"none"},id:"canvasForm",value:"",onChange:this.onChangeSentimentChart}),"undefined"!==typeof this.state.sentiments[this.state.word]&&s.a.createElement(w,{word:this.state.word,ts:this.state.sentiments[this.state.word].timestamps,vote:this.state.sentiments[this.state.word].vote,s:this.state.sentiments[this.state.word].score}))}}]),e}(i.Component);n(345);r.a.render(s.a.createElement(B,null),document.getElementById("root"))}},[[135,2,1]]]);
//# sourceMappingURL=main.59668ce5.chunk.js.map